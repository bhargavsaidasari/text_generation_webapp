<!DOCTYPE html>
<html lang="en">
    <head>
        <title>LSTM Text Generation</title>
        <style>
            .w3-tangerine {
                font-family: 'Tangerine', serif;    
            }
            .container h1 {
                color: blue;
            }
            .container h4 {
                line-height: 25px;
            }
            body {
                background-image: url("background.jpg");
                background-size: cover;
                background-repeat: no-repeat;
            
            }


        </style>
        <meta charset="utf-8">
        <meta name="viewport"  content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

        <script>
         "use strict";
         function submitForm(oFormElement) {
             var xhr = new XMLHttpRequest();
             xhr.onload = function() {
                 var response = xhr.responseText;
                 var resultElement = document.getElementById('result');
                 resultElement.className = 'bg-success';    
                 resultElement.innerHTML = response.replace(/\s/g, "<br>");
             }
             xhr.open (oFormElement.method, oFormElement.action, true);
             var review = document.getElementById('review');
             xhr.send (review.value);
             return false;
         }
        </script>

    </head>
    <body>
        <div class='container'>
            <h1 class='w3-tangerine'>LSTM Text Generation</h1>
 
        <h3> Information regarding the model architecture and preprocessing steps can be found <a href="https://github.com/bhargavsaidasari/Machine-Learning-Projects/tree/master/Seinfeld-Text-Generation">here. </a><br> </h3>
        <h3> The inference code along with instructions on the PyTorch lambda layer can be accessed from <a href="https://github.com/bhargavsaidasari/text_generation_webapp">here.</a> </h3>
        <h3> To run the network, simply click on one of the show's starring characters below. <br> </h3>
        <h4 class='w3-tangerine'> The first time the inference is run, it takes around 30 secs for the model to run. This is akin to a cold-start because lambda 
            needs to unzip the PyTorch library into it's temporary storage. However, the libraries stay in storage for about 15 minutes after each run
            and hence for every subsequent run the the inference time will be around 10 secs.<br> </h4> 


            <form method="POST"
                  action="https://fwuekykh4d.execute-api.us-west-2.amazonaws.com/prod"
                  onsubmit="return submitForm(this);" >   

                <div class="form-group">
                    <label for="review">
                        <input type="submit" name="image" value="kramer">
                        <img src="kramer.jpg" width="100" height="100">
                    </label>
                    <label for="review">
                        <input type="submit" name="image" value="jerry">
                        <img src="jerry_seinfeld.jpg" width="100" height="100">
                        </svg>
                    </label>
                    <label for="review">
                        <input type="submit" name="image" value="george">
                        <img src="george.jpg" width="100" height="100">
                    </label>
                    <label for="review">
                        <input type="submit" name="image" value="elaine" >
                        <img src="elaine.jpg" width="100" height="100">
                    </label>
                </div>
            </form>
            <h1 class="bg-success" id="result"></h1>
        </div>
    </body>
</html>